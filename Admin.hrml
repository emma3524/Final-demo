<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin Dashboard — TradeX</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- ===== Header ===== -->
  <header class="admin-header">
    <div class="logo">TradeX</div>
    <button class="btn secondary" id="adminLogout">Logout</button>
  </header>

  <!-- ===== Layout ===== -->
  <main class="admin-main">
    <aside class="admin-sidebar">
      <nav>
        <button class="sidebar-btn" data-tab="dash">Dashboard</button>
        <button class="sidebar-btn" data-tab="manageRates">Manage Rates</button>
        <button class="sidebar-btn" data-tab="manageUsers">Manage Users</button>
        <button class="sidebar-btn" data-tab="settings">Settings</button>
      </nav>
    </aside>

    <section class="admin-content">
      <div id="dash" class="admin-tab active">
        <h2>Welcome, Admin</h2>
        <p class="muted">Quick overview — frontend demo.</p>
      </div>

      <div id="manageRates" class="admin-tab">
        <h2>Manage Rates</h2>
        <p class="muted">Here you’ll be able to edit crypto & fiat rates (future backend integration).</p>
      </div>

      <div id="manageUsers" class="admin-tab">
        <h2>Manage Users</h2>
        <div id="usersList" class="card muted small">Loading users...</div>
      </div>

      <div id="settings" class="admin-tab">
        <h2>Settings</h2>
        <p class="muted">Platform preferences & configuration (demo only).</p>
      </div>
    </section>
  </main>

  <!-- Shared JS -->
  <script src="J's.html"></script>

  <script>
    // ---- Protect admin page ----
    (function(){
      const sess = JSON.parse(localStorage.getItem('tx_session') || 'null');
      if (!sess || !sess.isAdmin) {
        alert('Admin access required');
        window.location.href = 'login.html';
        return;
      }

      // Load user list demo
      const users = JSON.parse(localStorage.getItem('tx_users') || '[]');
      const list = document.getElementById('usersList');
      if (users.length === 0) {
        list.textContent = 'No registered users yet.';
      } else {
        list.innerHTML = users.map(
          u => `<div style="padding:0.4rem;border-bottom:1px solid #eee">
                  <strong>${u.username}</strong> — ${u.email}
                </div>`
        ).join('');
      }
    })();

    // ---- Logout ----
    document.getElementById('adminLogout').addEventListener('click', () => {
      localStorage.removeItem('tx_session');
      window.location.href = 'index.html';
    });

    // ---- Sidebar tab switching ----
    document.querySelectorAll('.sidebar-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.admin-tab').forEach(t => t.classList.remove('active'));
        document.getElementById(btn.dataset.tab).classList.add('active');
      });
    });
  </script>
</body>
</html>
